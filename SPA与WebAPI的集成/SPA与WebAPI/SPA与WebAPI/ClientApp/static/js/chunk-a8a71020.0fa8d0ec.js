(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a8a71020"],{"219e":function(t,e,s){"use strict";var a=s("de3d");function n(){}var i={},r=["REJECTED"],o=["FULFILLED"],l=["PENDING"];function c(t){if("function"!==typeof t)throw new TypeError("resolver must be a function");this.state=l,this.queue=[],this.outcome=void 0,t!==n&&m(this,t)}function u(t,e,s){this.promise=t,"function"===typeof e&&(this.onFulfilled=e,this.callFulfilled=this.otherCallFulfilled),"function"===typeof s&&(this.onRejected=s,this.callRejected=this.otherCallRejected)}function d(t,e,s){a((function(){var a;try{a=e(s)}catch(n){return i.reject(t,n)}a===t?i.reject(t,new TypeError("Cannot resolve promise with itself")):i.resolve(t,a)}))}function g(t){var e=t&&t.then;if(t&&("object"===typeof t||"function"===typeof t)&&"function"===typeof e)return function(){e.apply(t,arguments)}}function m(t,e){var s=!1;function a(e){s||(s=!0,i.reject(t,e))}function n(e){s||(s=!0,i.resolve(t,e))}function r(){e(n,a)}var o=p(r);"error"===o.status&&a(o.value)}function p(t,e){var s={};try{s.value=t(e),s.status="success"}catch(a){s.status="error",s.value=a}return s}function f(t){return t instanceof this?t:i.resolve(new this(n),t)}function h(t){var e=new this(n);return i.reject(e,t)}function b(t){var e=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var s=t.length,a=!1;if(!s)return this.resolve([]);var r=new Array(s),o=0,l=-1,c=new this(n);while(++l<s)u(t[l],l);return c;function u(t,n){function l(t){r[n]=t,++o!==s||a||(a=!0,i.resolve(c,r))}e.resolve(t).then(l,(function(t){a||(a=!0,i.reject(c,t))}))}}function v(t){var e=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var s=t.length,a=!1;if(!s)return this.resolve([]);var r=-1,o=new this(n);while(++r<s)l(t[r]);return o;function l(t){e.resolve(t).then((function(t){a||(a=!0,i.resolve(o,t))}),(function(t){a||(a=!0,i.reject(o,t))}))}}t.exports=c,c.prototype["finally"]=function(t){if("function"!==typeof t)return this;var e=this.constructor;return this.then(s,a);function s(s){function a(){return s}return e.resolve(t()).then(a)}function a(s){function a(){throw s}return e.resolve(t()).then(a)}},c.prototype["catch"]=function(t){return this.then(null,t)},c.prototype.then=function(t,e){if("function"!==typeof t&&this.state===o||"function"!==typeof e&&this.state===r)return this;var s=new this.constructor(n);if(this.state!==l){var a=this.state===o?t:e;d(s,a,this.outcome)}else this.queue.push(new u(s,t,e));return s},u.prototype.callFulfilled=function(t){i.resolve(this.promise,t)},u.prototype.otherCallFulfilled=function(t){d(this.promise,this.onFulfilled,t)},u.prototype.callRejected=function(t){i.reject(this.promise,t)},u.prototype.otherCallRejected=function(t){d(this.promise,this.onRejected,t)},i.resolve=function(t,e){var s=p(g,e);if("error"===s.status)return i.reject(t,s.value);var a=s.value;if(a)m(t,a);else{t.state=o,t.outcome=e;var n=-1,r=t.queue.length;while(++n<r)t.queue[n].callFulfilled(e)}return t},i.reject=function(t,e){t.state=r,t.outcome=e;var s=-1,a=t.queue.length;while(++s<a)t.queue[s].callRejected(e);return t},c.resolve=f,c.reject=h,c.all=b,c.race=v},2790:function(t,e,s){"use strict";var a=null;a="undefined"!==typeof Promise?Promise:s("219e"),t.exports={Promise:a}},"4e82":function(t,e,s){"use strict";var a=s("23e7"),n=s("1c0b"),i=s("7b0b"),r=s("d039"),o=s("a640"),l=[],c=l.sort,u=r((function(){l.sort(void 0)})),d=r((function(){l.sort(null)})),g=o("sort"),m=u||!d||!g;a({target:"Array",proto:!0,forced:m},{sort:function(t){return void 0===t?c.call(i(this)):c.call(i(this),n(t))}})},"7db0":function(t,e,s){"use strict";var a=s("23e7"),n=s("b727").find,i=s("44d2"),r=s("ae40"),o="find",l=!0,c=r(o);o in[]&&Array(1)[o]((function(){l=!1})),a({target:"Array",proto:!0,forced:l||!c},{find:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}}),i(o)},8039:function(t,e,s){"use strict";s.d(e,"p",(function(){return n})),s.d(e,"G",(function(){return i})),s.d(e,"F",(function(){return r})),s.d(e,"B",(function(){return o})),s.d(e,"c",(function(){return l})),s.d(e,"b",(function(){return c})),s.d(e,"h",(function(){return u})),s.d(e,"g",(function(){return d})),s.d(e,"d",(function(){return g})),s.d(e,"D",(function(){return m})),s.d(e,"e",(function(){return p})),s.d(e,"j",(function(){return f})),s.d(e,"f",(function(){return h})),s.d(e,"m",(function(){return b})),s.d(e,"H",(function(){return v})),s.d(e,"a",(function(){return D})),s.d(e,"E",(function(){return y})),s.d(e,"i",(function(){return _})),s.d(e,"k",(function(){return w})),s.d(e,"z",(function(){return S})),s.d(e,"y",(function(){return k})),s.d(e,"q",(function(){return C})),s.d(e,"n",(function(){return x})),s.d(e,"o",(function(){return I})),s.d(e,"C",(function(){return j})),s.d(e,"l",(function(){return U})),s.d(e,"A",(function(){return L})),s.d(e,"r",(function(){return $})),s.d(e,"x",(function(){return T})),s.d(e,"w",(function(){return O})),s.d(e,"v",(function(){return A})),s.d(e,"t",(function(){return E})),s.d(e,"s",(function(){return R})),s.d(e,"u",(function(){return B}));s("99af");var a=s("b775");function n(t){return Object(a["a"])({url:"/suggest/downloadSubContentAll",method:"get",params:{tag:t},responseType:"arraybuffer"})}function i(t){return Object(a["a"])({url:"/suggest/attachment",method:"post",data:t})}function r(t){return Object(a["a"])({url:"/suggest/list",method:"post",data:t})}function o(t){return Object(a["a"])({url:"/record/list",method:"post",data:t})}function l(t){return Object(a["a"])({url:"/suggest/".concat(t),method:"get"})}function c(t){return Object(a["a"])({url:"/suggest",method:"post",data:t})}function u(t,e){return Object(a["a"])({url:"/suggest/check/".concat(t),method:"put",data:e})}function d(t){return Object(a["a"])({url:"/suggest/submitCheck/".concat(t),method:"put"})}function g(t){return Object(a["a"])({url:"/suggest/allocation",method:"post",data:t})}function m(t){return Object(a["a"])({url:"/suggest/sign/".concat(t),method:"put"})}function p(t,e){return Object(a["a"])({url:"/suggest/answer/".concat(t),method:"put",data:e})}function f(t,e){return Object(a["a"])({url:"/suggest/completeAnswer/".concat(t),method:"put",data:e})}function h(t){return Object(a["a"])({url:"/SuggestWithdraw",method:"post",data:t})}function b(t,e){return Object(a["a"])({url:"/suggest/disagree/".concat(t),method:"post",data:e})}function v(t){return Object(a["a"])({url:"/SuggestWithdraw/check",method:"post",data:t})}function D(t,e){return Object(a["a"])({url:"/suggest/accomplish/".concat(t,"?completedResultStatus=").concat(e),method:"put"})}function y(){return Object(a["a"])({url:"/member",method:"get"})}function _(){return Object(a["a"])({url:"/member/cascader",method:"get"})}function w(t){return Object(a["a"])({url:"/boards?tag=".concat(t),method:"get"})}function S(t){return Object(a["a"])({url:"/suggest/reAlloc?id=".concat(t),method:"post"})}function k(t){return Object(a["a"])({url:"/suggest/export",method:"POST",responseType:"arraybuffer",data:t})}function C(t){return Object(a["a"])({url:"/suggest/download",method:"get",responseType:"arraybuffer",params:{id:t}})}function x(t){return Object(a["a"])({url:"/suggest/downloadManYiDu",method:"get",responseType:"arraybuffer",params:{id:t}})}function I(t){return Object(a["a"])({url:"/suggest/downloadSubContent",method:"get",responseType:"arraybuffer",params:{id:t}})}function j(t){return Object(a["a"])({url:"/suggest/gradeAnswer",method:"post",responseType:"arraybuffer",data:t})}function U(t){return Object(a["a"])({url:"/suggest/".concat(t),method:"DELETE"})}function L(t){return Object(a["a"])({url:"/suggest/reOrdering",method:"PUT",params:{tag:t}})}function $(t,e,s){return Object(a["a"])({url:"/suggest/exportAllSuggestsExcel",method:"get",responseType:"arraybuffer",params:{begin:t,end:e,tag:s}})}function T(t,e,s){return Object(a["a"])({url:"/suggest/exportManYiDuSuggestsExcel",method:"get",responseType:"arraybuffer",params:{begin:t,end:e,tag:s}})}function O(t,e,s){return Object(a["a"])({url:"/suggest/exportFirstUnitSuggestsExcel",method:"get",responseType:"arraybuffer",params:{begin:t,end:e,tag:s}})}function A(t,e,s){return Object(a["a"])({url:"/suggest/exportFirstUnitDetailSuggests",method:"get",responseType:"arraybuffer",params:{begin:t,end:e,tag:s}})}function E(t,e,s){return Object(a["a"])({url:"/suggest/exportCategorySuggestsExcel",method:"get",responseType:"arraybuffer",params:{begin:t,end:e,tag:s}})}function R(t,e,s){return Object(a["a"])({url:"/suggest/exportCategoryDetailSuggestsExcel",method:"get",responseType:"arraybuffer",params:{begin:t,end:e,tag:s}})}function B(t,e,s){return Object(a["a"])({url:"/suggest/exportCompletedTypeSuggestsExcel",method:"get",responseType:"arraybuffer",params:{begin:t,end:e,tag:s}})}},8899:function(t,e,s){"use strict";s("925f")},9109:function(t,e,s){"use strict";s.d(e,"e",(function(){return n})),s.d(e,"a",(function(){return i})),s.d(e,"d",(function(){return r})),s.d(e,"b",(function(){return o})),s.d(e,"c",(function(){return l}));var a=s("b775");function n(t){return Object(a["a"])({url:"/user",method:"get",params:t})}function i(t){return Object(a["a"])({url:"user",method:"post",data:t})}function r(t){return Object(a["a"])({url:"/user/".concat(t),method:"get"})}function o(t){return Object(a["a"])({url:"admin",method:"get",params:t})}function l(t){return Object(a["a"])({url:"/user/".concat(t),method:"delete"})}},"925f":function(t,e,s){},b329:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"advice-container"},[s("div",{staticClass:"main"},[t.suggestDetail.status>=0&&t.suggestDetail.status<2?[s("el-form",{ref:"form",staticClass:"form",attrs:{rules:t.rules,model:t.suggestDetail,"label-width":"100px"}},[t.suggestDetail.code.length>0?s("el-form-item",{staticClass:"formItem",attrs:{label:"建议编号:"}},[s("el-input",{staticStyle:{width:"30%"},attrs:{disabled:""},model:{value:t.suggestDetail.serialNumber,callback:function(e){t.$set(t.suggestDetail,"serialNumber",e)},expression:"suggestDetail.serialNumber"}})],1):t._e(),s("el-form-item",{staticClass:"formItem",attrs:{prop:"metting",label:"会议期间:"}},[s("el-select",{staticStyle:{width:"30%"},attrs:{disabled:!t.canEditForm,"placeho-alder":"请选择会议期间"},model:{value:t.suggestDetail.metting,callback:function(e){t.$set(t.suggestDetail,"metting",e)},expression:"suggestDetail.metting"}},[s("el-option",{attrs:{label:"开会期间",value:"A"}}),s("el-option",{attrs:{label:"闭会期间",value:"B"}})],1)],1),s("el-form-item",{staticClass:"formItem",attrs:{prop:"category",label:"建议类型:"}},[s("el-select",{staticStyle:{width:"30%"},attrs:{disabled:!t.canEditForm,filterable:"","placeho-alder":"请选择建议类型"},model:{value:t.suggestDetail.category,callback:function(e){t.$set(t.suggestDetail,"category",e)},expression:"suggestDetail.category"}},[s("el-option",{attrs:{label:"党群类",value:"党群类"}}),s("el-option",{attrs:{label:"财政经济类",value:"财政经济类"}}),s("el-option",{attrs:{label:"社会建设类",value:"社会建设类"}}),s("el-option",{attrs:{label:"监察司法类",value:"监察司法类"}}),s("el-option",{attrs:{label:"城建环保类",value:"城建环保类"}}),s("el-option",{attrs:{label:"农业农村类",value:"农业农村类"}}),s("el-option",{attrs:{label:"教科文卫类",value:"教科文卫类"}}),s("el-option",{attrs:{label:"民族宗教类",value:"民族宗教类"}}),s("el-option",{attrs:{label:"综合管理类",value:"综合管理类"}}),s("el-option",{attrs:{label:"其他类",value:"其他类"}})],1)],1),s("el-form-item",{staticClass:"formItem",attrs:{prop:"title",label:"建议标题:"}},[s("el-input",{staticStyle:{width:"30%"},attrs:{disabled:!t.canEditForm},model:{value:t.suggestDetail.title,callback:function(e){t.$set(t.suggestDetail,"title",e)},expression:"suggestDetail.title"}})],1),s("el-form-item",{staticClass:"formItem",attrs:{prop:"first",label:"主提议人:"}},[s("el-cascader",{staticStyle:{width:"30%"},attrs:{disabled:!t.canEditForm,options:t.cascaderStaffList,placeholder:"请选择主提议人"},model:{value:t.firstCascaderValue,callback:function(e){t.firstCascaderValue=e},expression:"firstCascaderValue"}})],1),s("el-form-item",{staticClass:"formItem",staticStyle:{width:"80%"},attrs:{prop:"seconds",label:"附议人:"}},[s("el-cascader",{staticStyle:{width:"100%"},attrs:{disabled:!t.canEditForm,props:{multiple:!0},options:t.secondsCascader,placeholder:"请选择附议人"},model:{value:t.secondCascaderValue,callback:function(e){t.secondCascaderValue=e},expression:"secondCascaderValue"}})],1),s("el-form-item",{staticClass:"formItem",attrs:{prop:"time",label:"建议时间:"}},[t.canEditForm?t._e():s("div",[t._v(t._s(t.suggestDetail.time))]),t.canEditForm?s("el-date-picker",{staticStyle:{width:"30%"},attrs:{"value-format":"yyyy-MM-dd HH:mm:ss","picker-options":t.expireTimeOption,type:"datetime",placeholder:"选择时间"},model:{value:t.suggestDetail.time,callback:function(e){t.$set(t.suggestDetail,"time",e)},expression:"suggestDetail.time"}}):t._e()],1),s("el-form-item",{attrs:{label:"建议内容:",prop:"content"}},[s("el-input",{staticStyle:{width:"80%"},attrs:{disabled:!t.canEditForm,placeholder:"请输入建议内容",type:"textarea",autosize:{minRows:10,maxRows:25}},model:{value:t.suggestDetail.content,callback:function(e){t.$set(t.suggestDetail,"content",e)},expression:"suggestDetail.content"}})],1),0===t.suggestDetail.status&&(t.isLianLuoYuan||t.isRenDaDaiBiao)?[s("el-form-item",{staticClass:"operating"},[s("el-button",{on:{click:t.backTo}},[t._v("取消")]),s("el-button",{attrs:{type:"primary"},on:{click:t.onlySave}},[t._v("仅保存")]),s("el-button",{attrs:{type:"primary"},on:{click:t.saveAndSubmit}},[t._v("保存并提交")])],1)]:t._e(),t.isRenDaiLian?[s("el-form-item",{staticClass:"operating"},[s("el-button",{attrs:{disabled:t.committeeEditStatus},on:{click:function(e){t.auditData.pass=!1,t.auditSuggestDialogVisible=!0}}},[t._v("不通过")]),s("el-button",{attrs:{disabled:t.committeeEditStatus,type:"primary"},on:{click:t.passSuggest}},[t._v("通过")]),s("el-button",{attrs:{type:"danger"},on:{click:t.committeeUpdateSuggest}},[t._v(t._s(t.committeeEditStatus?"保存":"修改"))]),t.committeeEditStatus?s("el-button",{attrs:{type:"warning"},on:{click:function(e){t.committeeEditStatus=!1,t.suggestDetail=t.suggestDetailCopy}}},[t._v("退出修改")]):t._e()],1)]:t._e()],2)]:t._e(),t.suggestDetail.status>=2?[s("el-form",{ref:"form",staticClass:"form",staticStyle:{height:"100%",position:"relative","padding-bottom":"10px"},attrs:{rules:t.rules,model:t.suggestDetail,"label-width":"100px"}},[t.suggestDetail.code.length>0?s("el-form-item",{staticClass:"formItem",attrs:{label:"建议编号:"}},[t._v(" "+t._s(t.suggestDetail.serialNumber)+" ")]):t._e(),s("el-form-item",{staticClass:"formItem",attrs:{prop:"metting",label:"会议期间:"}},[s("el-select",{staticStyle:{width:"30%"},attrs:{disabled:!0,"placeho-alder":"请选择会议期间"},model:{value:t.suggestDetail.metting,callback:function(e){t.$set(t.suggestDetail,"metting",e)},expression:"suggestDetail.metting"}},[s("el-option",{attrs:{label:"开会期间",value:"A"}}),s("el-option",{attrs:{label:"闭会期间",value:"B"}})],1)],1),s("el-form-item",{staticClass:"formItem",attrs:{prop:"category",label:"建议类型:"}},[t._v(" "+t._s(t.suggestDetail.category)+" ")]),s("el-form-item",{staticClass:"formItem",attrs:{prop:"title",label:"建议标题:"}},[t._v(" "+t._s(t.suggestDetail.title)+" ")]),s("el-form-item",{staticClass:"formItem",attrs:{prop:"first",label:"主提议人:"}},[s("div",[s("el-cascader",{staticStyle:{width:"250px"},attrs:{disabled:!0,options:t.cascaderStaffList,placeholder:"请选择主提议人"},model:{value:t.firstCascaderValue,callback:function(e){t.firstCascaderValue=e},expression:"firstCascaderValue"}})],1),s("div",[t._v("联系方式："+t._s(t.firstCascaderValuePhone))])]),s("el-form-item",{staticClass:"formItem",staticStyle:{width:"80%"},attrs:{prop:"seconds",label:"附议人:"}},[s("el-cascader",{staticStyle:{width:"100%"},attrs:{disabled:!0,props:{multiple:!0},options:t.secondsCascader,placeholder:"请选择附议人"},model:{value:t.secondCascaderValue,callback:function(e){t.secondCascaderValue=e},expression:"secondCascaderValue"}})],1),s("el-form-item",{staticClass:"formItem",attrs:{prop:"time",label:"建议时间:"}},[t._v(" "+t._s(t.suggestDetail.time)+" ")]),s("el-form-item",{attrs:{label:"建议内容:",prop:"content"}},[s("el-input",{staticStyle:{width:"80%"},attrs:{readonly:"",type:"textarea",autosize:{minRows:10,maxRows:25},resize:"none"},model:{value:t.suggestDetail.content,callback:function(e){t.$set(t.suggestDetail,"content",e)},expression:"suggestDetail.content"}})],1),0===t.suggestDetail.status&&(t.isLianLuoYuan||t.isRenDaDaiBiao)?[s("el-form-item",{staticClass:"operating"},[s("el-button",{on:{click:t.backTo}},[t._v("取消")]),s("el-button",{attrs:{type:"primary"},on:{click:t.onlySave}},[t._v("仅保存")]),s("el-button",{attrs:{type:"primary"},on:{click:t.saveAndSubmit}},[t._v("保存并提交")])],1)]:t._e(),t.isRenDaiLian&&1===t.suggestDetail.status?[s("el-form-item",{staticClass:"operating"},[s("el-button",{on:{click:function(e){t.auditData.pass=!1,t.auditSuggestDialogVisible=!0}}},[t._v("不通过")]),s("el-button",{attrs:{type:"primary"},on:{click:t.passSuggest}},[t._v("通过")]),s("el-button",{attrs:{type:"danger"},on:{click:t.committeeUpdateSuggest}},[t._v(t._s(t.committeeEditStatus?"保存":"修改"))])],1)]:t._e(),t.isBanLiDanWei&&(t.suggestDetail.status<4||6===t.suggestDetail.status)?[s("el-form-item",{staticStyle:{"text-align":"right"}},[t.currentUnit?s("span",{staticStyle:{display:"inline-block","margin-right":"10px"}},[s("el-button",{attrs:{type:"primary",disabled:t.currentUnit.isSign},on:{click:t.handleSign}},[t._v(t._s(t.currentUnit.isSign?"已签收":"签 收"))])],1):t._e()])]:t._e()],2)]:t._e(),(t.isLianLuoYuan||t.isRenDaDaiBiao)&&0===t.suggestDetail.status&&2===t.suggestDetail.checkStatus?s("div",{staticClass:"reasonBox"},[s("el-form",{attrs:{"label-width":"100px"}},[s("el-form-item",{attrs:{label:"未通过原因:"}},[s("el-input",{attrs:{type:"textarea",rows:"4",resize:"none",disabled:""},model:{value:t.suggestDetail.reason,callback:function(e){t.$set(t.suggestDetail,"reason",e)},expression:"suggestDetail.reason"}})],1)],1)],1):t._e()],2),t.suggestDetail.status>=3&&t.isBanLiDanWei&&t.currentUnit&&t.currentUnit.isSign&&5!==t.suggestDetail.status&&t.suggestDetail.status<7?s("div",{staticClass:"process main"},[t.currentUnit.host?s("el-form",{ref:"process",staticStyle:{height:"100%",position:"relative"},attrs:{rules:t.departEules,model:t.processData,"label-width":"100px"}},[s("el-form-item",{staticClass:"formItem",attrs:{prop:"subContent",label:"概要答复"}},[s("div",{staticClass:"name"},[t._v(t._s(t.currentUnit.name))]),s("el-input",{attrs:{placeholder:"请输入概要答复",type:"textarea",rows:2,maxlength:"500","show-word-limit":"",resize:"none"},model:{value:t.processData.subContent,callback:function(e){t.$set(t.processData,"subContent",e)},expression:"processData.subContent"}})],1),s("el-form-item",{staticClass:"formItem",attrs:{prop:"content",label:"完整答复"}},[s("div",{staticClass:"name"},[t._v(t._s(t.currentUnit.name)+"（"+t._s(t.currentUnit.host?"主办单位":"会办单位")+"）")]),s("el-input",{attrs:{placeholder:"请输入完整答复",type:"textarea",rows:4,resize:"none"},model:{value:t.processData.content,callback:function(e){t.$set(t.processData,"content",e)},expression:"processData.content"}})],1),s("el-form-item",{staticClass:"formItem",attrs:{label:"添加附件:",prop:"attach"}},[s("el-upload",{ref:"uploadFile",staticStyle:{width:"30%","min-width":"400px"},attrs:{action:"action",multiple:!0,"http-request":t.uploadFile,"on-preview":t.handlePreview,"on-remove":t.handleRemove,"before-remove":t.beforeRemove,"file-list":t.processData_Attachment}},[s("el-button",{attrs:{size:"small",type:"primary",disabled:null===t.currentUnit||4!==t.suggestDetail.status&&6!==t.suggestDetail.status&&3!==t.suggestDetail.status}},[t._v("点击上传")]),t._v("（PDF文档 红头答复文件） ")],1)],1),t.currentUnit&&t.currentUnit.host&&t.currentUnit.isSign?s("el-form-item",{staticClass:"formItem",attrs:{label:"办理形式:",prop:t.currentUnit&&t.currentUnit.host&&t.currentUnit.isSign?"form":""}},[s("el-checkbox-group",{model:{value:t.checkList,callback:function(e){t.checkList=e},expression:"checkList"}},[s("el-checkbox",{attrs:{label:"走访面谈"}}),s("el-checkbox",{attrs:{label:"座谈会"}}),s("el-checkbox",{attrs:{label:"调研"}}),s("el-checkbox",{attrs:{label:"视察"}}),s("el-checkbox",{attrs:{label:"电话沟通 "}}),s("el-checkbox",{attrs:{label:"函件"}})],1)],1):t._e(),t.currentUnit&&t.currentUnit.host&&t.currentUnit.isSign?s("el-form-item",{staticClass:"formItem",attrs:{label:"办理时间:",prop:t.currentUnit&&t.currentUnit.host&&t.currentUnit.isSign?"time":""}},[s("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd HH:mm:ss",type:"datetime",placeholder:"选择时间"},model:{value:t.processData.time,callback:function(e){t.$set(t.processData,"time",e)},expression:"processData.time"}})],1):t._e(),t.currentUnit&&t.currentUnit.host&&t.currentUnit.isSign?s("el-form-item",{staticClass:"formItem",attrs:{label:"办结类型:",prop:t.currentUnit&&t.currentUnit.host&&t.currentUnit.isSign?"completedType":""}},[s("el-radio-group",{model:{value:t.processData.completedType,callback:function(e){t.$set(t.processData,"completedType",e)},expression:"processData.completedType"}},[s("el-radio-button",{attrs:{label:1}},[t._v("已解决")]),s("el-radio-button",{attrs:{label:2}},[t._v("纳入计划")]),s("el-radio-button",{attrs:{label:3}},[t._v("解释")]),s("el-radio-button",{attrs:{label:4}},[t._v("留作参考")])],1)],1):t._e(),t.isBanLiDanWei&&t.currentUnit.isSign&&(3===t.suggestDetail.status||4===t.suggestDetail.status||6===t.suggestDetail.status)?s("el-form-item",{staticClass:"formItem",staticStyle:{"text-align":"right"}},[s("el-button",{attrs:{type:"primary"},on:{click:t.handleSave}},[t._v(t._s(t.currentUnit.host?"保存但不提交最终答复":"提交"))]),t.currentUnit.host?s("el-button",{attrs:{type:"primary"},on:{click:t.handleSubmit}},[t._v("保存并提交最终答复")]):t._e()],1):t._e()],1):t._e()],1):t._e(),t.banLiDanWeiAnswers.length>0||t.banLiDanWeiSecondAnswers.length>0?s("el-collapse",{staticStyle:{"margin-bottom":"10px"},attrs:{value:["1","2"]}},[s("el-collapse-item",{attrs:{name:"1"}},[s("template",{slot:"title"},[s("el-tag",{staticStyle:{"margin-left":"5px"}},[t._v("办理单位一次答复")])],1),t.banLiDanWeiAnswersCanShowLength>0?s("div",{staticClass:"main"},[s("el-form",{staticStyle:{height:"100%",position:"relative"},attrs:{"label-width":"100px"}},t._l(t.banLiDanWeiAnswers,(function(e){return s("div",{key:e.userId},[[s("el-form-item",{staticClass:"formItem",attrs:{prop:"subContent",label:e.host?"主办单位:":"会办单位:"}},[s("el-tag",{attrs:{type:"success"}},[t._v("概要答复")]),t._v(t._s(e.unitName)+" "),s("el-input",{attrs:{type:"textarea",readonly:"",rows:2,resize:"none"},model:{value:e.subContent,callback:function(s){t.$set(e,"subContent",s)},expression:"answer.subContent"}})],1),s("el-form-item",{staticClass:"formItem",attrs:{prop:"content"}},[s("div",{staticClass:"name"},[s("el-tag",{attrs:{type:"success"}},[t._v("一次答复")])],1),s("el-input",{attrs:{type:"textarea",readonly:"",rows:4,resize:"none"},model:{value:e.content,callback:function(s){t.$set(e,"content",s)},expression:"answer.content"}})],1),s("el-form-item",{attrs:{label:""}},[s("el-upload",{staticStyle:{width:"30%","min-width":"400px"},attrs:{action:"action","on-preview":t.handlePreview,disabled:!0,"file-list":e.displayAttachments}},[t._v(" 附件列表 ")])],1),e.host?s("el-form-item",{staticClass:"formItem",attrs:{label:"办理形式:"}},[s("el-checkbox-group",{staticStyle:{"pointer-events":"none",cursor:"not-allowed"},model:{value:e.checkList,callback:function(s){t.$set(e,"checkList",s)},expression:"answer.checkList"}},[s("el-checkbox",{attrs:{label:"走访面谈"}}),s("el-checkbox",{attrs:{label:"座谈会"}}),s("el-checkbox",{attrs:{label:"调研"}}),s("el-checkbox",{attrs:{label:"视察"}}),s("el-checkbox",{attrs:{label:"电话沟通 "}}),s("el-checkbox",{attrs:{label:"函件"}})],1)],1):t._e(),e.host?s("el-form-item",{staticClass:"formItem",attrs:{label:"办理时间:"}},[t._v(" "+t._s(e.time)+" ")]):t._e(),e.host?s("el-form-item",{staticClass:"formItem",attrs:{label:"办结类型:"}},[s("el-radio-group",{staticStyle:{"pointer-events":"none",cursor:"not-allowed"},model:{value:t.suggestDetail.firstCompletedType,callback:function(e){t.$set(t.suggestDetail,"firstCompletedType",e)},expression:"suggestDetail.firstCompletedType"}},[s("el-radio-button",{attrs:{label:1}},[t._v("已解决")]),s("el-radio-button",{attrs:{label:2}},[t._v("纳入计划")]),s("el-radio-button",{attrs:{label:3}},[t._v("解释")]),s("el-radio-button",{attrs:{label:4}},[t._v("留作参考")])],1)],1):t._e(),s("el-divider",{staticStyle:{width:"85%"}})]],2)})),0)],1):t._e()],2),s("el-collapse-item",{attrs:{name:"2"}},[s("template",{slot:"title"},[s("el-tag",{staticStyle:{"margin-left":"5px"},attrs:{type:"success"}},[t._v("办理单位二次答复")])],1),t.banLiDanWeiSecondAnswersCanShowLength>0?s("div",{staticClass:"main"},[s("el-form",{staticStyle:{height:"100%",position:"relative"},attrs:{"label-width":"100px"}},t._l(t.banLiDanWeiSecondAnswers,(function(e){return s("div",{key:e.userId},[[s("el-form-item",{staticClass:"formItem",attrs:{prop:"subContent",label:e.host?"主办单位:":"会办单位:"}},[s("div",{staticClass:"name"},[s("el-tag",{attrs:{type:""}},[t._v("概要答复")]),t._v(" "+t._s(e.unitName)+" ")],1),s("el-input",{attrs:{type:"textarea",readonly:"",rows:2,resize:"none"},model:{value:e.subContent,callback:function(s){t.$set(e,"subContent",s)},expression:"answer.subContent"}})],1),s("el-form-item",{staticClass:"formItem",attrs:{prop:"content"}},[s("div",{staticClass:"name"},[s("el-tag",{attrs:{type:""}},[t._v("二次答复")]),t._v(" "+t._s(e.unitName)+" ")],1),s("el-input",{attrs:{type:"textarea",readonly:"",rows:4,resize:"none"},model:{value:e.content,callback:function(s){t.$set(e,"content",s)},expression:"answer.content"}})],1),s("el-form-item",{attrs:{label:""}},[s("el-upload",{staticStyle:{width:"30%","min-width":"400px"},attrs:{action:"action","on-preview":t.handlePreview,disabled:!0,"file-list":e.displayAttachments}},[t._v(" 附件列表 ")])],1),e.host?s("el-form-item",{staticClass:"formItem",attrs:{label:"办理形式:"}},[s("el-checkbox-group",{staticStyle:{"pointer-events":"none",cursor:"not-allowed"},model:{value:e.checkList,callback:function(s){t.$set(e,"checkList",s)},expression:"answer.checkList"}},[s("el-checkbox",{attrs:{label:"走访面谈"}}),s("el-checkbox",{attrs:{label:"座谈会"}}),s("el-checkbox",{attrs:{label:"调研"}}),s("el-checkbox",{attrs:{label:"视察"}}),s("el-checkbox",{attrs:{label:"电话沟通 "}}),s("el-checkbox",{attrs:{label:"函件"}})],1)],1):t._e(),e.host?s("el-form-item",{staticClass:"formItem",attrs:{label:"办理时间:"}},[t._v(" "+t._s(e.time)+" ")]):t._e(),e.host?s("el-form-item",{staticClass:"formItem",attrs:{label:"办结类型:"}},[s("el-radio-group",{staticStyle:{"pointer-events":"none",cursor:"not-allowed"},model:{value:t.suggestDetail.secondCompletedType,callback:function(e){t.$set(t.suggestDetail,"secondCompletedType",e)},expression:"suggestDetail.secondCompletedType"}},[s("el-radio-button",{attrs:{label:1}},[t._v("已解决")]),s("el-radio-button",{attrs:{label:2}},[t._v("纳入计划")]),s("el-radio-button",{attrs:{label:3}},[t._v("解释")]),s("el-radio-button",{attrs:{label:4}},[t._v("留作参考")])],1)],1):t._e(),s("el-divider",{staticStyle:{width:"85%"}})]],2)})),0)],1):t._e()],2)],1):t._e(),t.suggestDetail.status>=2&&t.suggestDetail.status<=4&&t.isDangZhengBan?s("div",{staticClass:"main alloc-department"},[s("el-form",{ref:"department",staticStyle:{height:"100%",position:"relative","padding-bottom":"20px"},attrs:{model:t.department,"label-width":"80px"}},[s("div",[s("el-form-item",{staticClass:"formItem",attrs:{label:"主办单位:"}},[s("el-select",{staticStyle:{width:"420px"},attrs:{filterable:"",disabled:!t.canShowAllocatedUnit,placeholder:"请选择"},on:{change:function(e){return t.changeUnit(null)}},model:{value:t.department.first.userId,callback:function(e){t.$set(t.department.first,"userId",e)},expression:"department.first.userId"}},t._l(t.units,(function(e){return s("el-option",{key:e.id,attrs:{label:e.name,value:e.id,disabled:t.checkProcess(e.id)}})})),1)],1)],1),s("div",{staticStyle:{display:"flex"}},[s("div",{staticStyle:{"margin-right":"10px"}},[s("el-form-item",{staticClass:"formItem",attrs:{label:"会办单位:"}},t._l(t.department.seconds,(function(e,a){return s("div",{key:a,staticStyle:{"margin-bottom":"10px"}},[s("el-select",{staticStyle:{width:"420px"},attrs:{disabled:!t.canShowAllocatedUnit,filterable:"",placeholder:"请选择"},on:{change:function(e){return t.changeUnit(a)}},model:{value:t.department.seconds[a].userId,callback:function(e){t.$set(t.department.seconds[a],"userId",e)},expression:"department.seconds[index].userId"}},t._l(t.units,(function(e){return s("el-option",{key:e.id,attrs:{label:e.name,value:e.id,disabled:e.id===t.department.first.userId}})})),1),t.canShowAllocatedUnit?s("i",{staticClass:"el-icon-circle-close",staticStyle:{"margin-left":"5px","font-size":"20px",color:"gray"},on:{click:function(e){return t.delUnit(a)}}}):t._e()],1)})),0)],1),t.canShowAllocatedUnit?s("i",{staticClass:"add el-icon-circle-plus-outline",on:{click:function(e){return t.addUnit()}}}):t._e()]),t.canShowAllocatedUnit?s("div",{staticClass:"btn",staticStyle:{"text-align":"right"}},[s("el-button",{attrs:{type:"primary"},on:{click:t.saveUnit}},[t._v("保 存")])],1):t._e()])],1):t._e(),!t.isRenDaiLian&&!t.isAdmin||5!==t.suggestDetail.status&&7!==t.suggestDetail.status?t._e():s("div",{staticClass:"main"},[s("div",{staticStyle:{"text-align":"right"}},[null===t.suggestDetail.grade&&5===t.suggestDetail.status?s("div",[s("el-button",{attrs:{type:"success"},on:{click:function(e){t.replayDataDialogVisible=!0}}},[t._v("一次答复")])],1):t._e(),null===t.suggestDetail.secondGrade&&7===t.suggestDetail.status?s("div",[s("el-button",{attrs:{type:"success"},on:{click:function(e){t.replayDataDialogVisible=!0}}},[t._v("二次答复")])],1):t._e()])]),t.suggestDetail.status>4?s("div",{staticClass:"process main"},[s("el-form",{ref:"process",staticStyle:{height:"100%",position:"relative"},attrs:{rules:t.departEules,model:t.processData,"label-width":"130px"}},[s("div",[s("el-form-item",{staticClass:"formItem",attrs:{label:"满意度："}},[1===t.suggestDetail.grade?s("el-tag",{attrs:{type:"danger"}},[t._v("满意")]):2===t.suggestDetail.grade?s("el-tag",{attrs:{type:"success"}},[t._v("基本满意")]):3===t.suggestDetail.grade?s("el-tag",{attrs:{type:"warning"}},[t._v("不满意")]):88===t.suggestDetail.grade?s("el-tag",{attrs:{type:"info"}},[t._v("谅解")]):s("el-tag",{attrs:{type:"info"}},[t._v("未答复")])],1),s("el-form-item",{staticClass:"formItem",attrs:{label:"过程满意度："}},[1===t.suggestDetail.progressType?s("el-tag",{attrs:{type:"danger"}},[t._v("满意")]):2===t.suggestDetail.progressType?s("el-tag",{attrs:{type:"success"}},[t._v("基本满意")]):3===t.suggestDetail.progressType?s("el-tag",{attrs:{type:"warning"}},[t._v("不满意")]):88===t.suggestDetail.progressType?s("el-tag",{attrs:{type:"info"}},[t._v("谅解")]):s("el-tag",{attrs:{type:"info"}},[t._v("未答复")])],1),t.suggestDetail.gradeReason?s("el-form-item",{staticClass:"formItem",attrs:{label:"评语："}},[s("el-input",{attrs:{type:"textarea",rows:"7",resize:"none",readonly:""},model:{value:t.suggestDetail.gradeReason,callback:function(e){t.$set(t.suggestDetail,"gradeReason",e)},expression:"suggestDetail.gradeReason"}})],1):t._e()],1),t.suggestDetail.secondGrade?s("div",[s("el-form-item",{staticClass:"formItem",attrs:{label:"二次满意度："}},[1===t.suggestDetail.secondGrade?s("el-tag",{attrs:{type:"danger"}},[t._v("满意")]):2===t.suggestDetail.secondGrade?s("el-tag",{attrs:{type:"success"}},[t._v("基本满意")]):3===t.suggestDetail.secondGrade?s("el-tag",{attrs:{type:"warning"}},[t._v("不满意")]):88===t.suggestDetail.secondGrade?s("el-tag",{attrs:{type:"warning"}},[t._v("谅解")]):s("el-tag",{attrs:{type:"info"}},[t._v("未答复")])],1),s("el-form-item",{staticClass:"formItem",attrs:{label:"二次过程满意度："}},[1===t.suggestDetail.secondProgressType?s("el-tag",{attrs:{type:"danger"}},[t._v("满意")]):2===t.suggestDetail.secondProgressType?s("el-tag",{attrs:{type:"success"}},[t._v("基本满意")]):3===t.suggestDetail.secondProgressType?s("el-tag",{attrs:{type:"warning"}},[t._v("不满意")]):88===t.suggestDetail.secondProgressType?s("el-tag",{attrs:{type:"warning"}},[t._v("谅解")]):s("el-tag",{attrs:{type:"info"}},[t._v("未答复")])],1),t.suggestDetail.secondGradeReason?s("el-form-item",{staticClass:"formItem",attrs:{label:"评语："}},[s("el-input",{attrs:{type:"textarea",rows:"7",resize:"none",readonly:""},model:{value:t.suggestDetail.secondGradeReason,callback:function(e){t.$set(t.suggestDetail,"secondGradeReason",e)},expression:"suggestDetail.secondGradeReason"}})],1):t._e()],1):t._e()])],1):t._e(),t.isRenDaiLian&&8===t.suggestDetail.status?s("div",{staticClass:"finished"},[s("div",{staticClass:"btns"},[s("el-button",{on:{click:t.backTo}},[t._v("取消")]),s("el-button",{attrs:{type:"primary"},on:{click:function(e){t.accomplishDialog.visible=!0}}},[t._v("办结")]),s("el-button",{attrs:{type:"primary"},on:{click:t.backReAlloc}},[t._v("退回重新分配")])],1)]):t._e(),s("el-dialog",{attrs:{visible:t.auditSuggestDialogVisible,width:"40%","show-close":!1,"custom-class":"dialogBox",title:"请填写您的不通过原因"},on:{"update:visible":function(e){t.auditSuggestDialogVisible=e}}},[s("el-form",{ref:"auditForm",attrs:{model:t.auditData,rules:{reason:[{required:!0,message:"请填写您的不通过原因",trigger:"blur"}]}}},[s("el-form-item",{attrs:{prop:"reason"}},[s("el-input",{attrs:{required:"",type:"textarea",rows:"13",resize:"none"},model:{value:t.auditData.reason,callback:function(e){t.$set(t.auditData,"reason",e)},expression:"auditData.reason"}})],1)],1),s("div",{staticClass:"btn"},[s("el-button",{on:{click:function(e){t.auditSuggestDialogVisible=!1}}},[t._v("取 消")]),s("el-button",{attrs:{type:"primary"},on:{click:t.passSuggest}},[t._v("确 定")])],1)],1),s("el-dialog",{attrs:{visible:t.accomplishDialog.visible,width:"500px","show-close":!1,"custom-class":"dialogBox",title:"请选择办结状态"},on:{"update:visible":function(e){return t.$set(t.accomplishDialog,"visible",e)}}},[s("el-form",{ref:"accomplishDialogForm",attrs:{model:t.accomplishDialog.data,rules:{completedResultStatus:[{required:!0,message:"请选择办理结果",trigger:"blur"}]}}},[s("el-form-item",{attrs:{prop:"completedResultStatus",label:"办理结果"}},[s("el-radio-group",{model:{value:t.accomplishDialog.data.completedResultStatus,callback:function(e){t.$set(t.accomplishDialog.data,"completedResultStatus",e)},expression:"accomplishDialog.data.completedResultStatus"}},[s("el-radio-button",{attrs:{label:"1"}},[t._v("已办成")]),s("el-radio-button",{attrs:{label:"2"}},[t._v("办理中")]),s("el-radio-button",{attrs:{label:"4"}},[t._v("没条件办")]),s("el-radio-button",{attrs:{label:"8"}},[t._v("解释")])],1)],1)],1),s("div",{staticClass:"btn"},[s("el-button",{on:{click:function(e){t.accomplishDialog.visible=!1}}},[t._v("取 消")]),s("el-button",{attrs:{type:"primary"},on:{click:t.accomplish}},[t._v("确 定")])],1)],1),s("el-dialog",{attrs:{visible:t.replayDataDialogVisible,title:"满意度答复"},on:{"update:visible":function(e){t.replayDataDialogVisible=e}}},[s("el-form",{ref:"replayDataForm",attrs:{model:t.replayData,rules:t.replayDataRule,"label-width":"120px"}},[s("el-form-item",{attrs:{label:"办理过程满意度",prop:"progressType"}},[s("el-radio-group",{model:{value:t.replayData.progressType,callback:function(e){t.$set(t.replayData,"progressType",e)},expression:"replayData.progressType"}},[s("el-radio-button",{attrs:{label:1}},[t._v("满意")]),s("el-radio-button",{attrs:{label:2}},[t._v("基本满意")]),s("el-radio-button",{attrs:{label:88}},[t._v("谅解")]),s("el-radio-button",{attrs:{label:3}},[t._v("不满意")])],1)],1),s("el-form-item",{attrs:{label:"满意度",prop:"type"}},[s("el-radio-group",{model:{value:t.replayData.type,callback:function(e){t.$set(t.replayData,"type",e)},expression:"replayData.type"}},[s("el-radio-button",{attrs:{label:1}},[t._v("满意")]),s("el-radio-button",{attrs:{label:2}},[t._v("基本满意")]),s("el-radio-button",{attrs:{label:88}},[t._v("谅解")]),s("el-radio-button",{attrs:{label:3}},[t._v("不满意")])],1)],1),s("el-form-item",{attrs:{label:"原因",prop:"reason"}},[s("el-input",{attrs:{type:"textarea",maxlength:""},model:{value:t.replayData.reason,callback:function(e){t.$set(t.replayData,"reason",e)},expression:"replayData.reason"}})],1),s("el-form-item",[s("el-button",{on:{click:function(e){t.replayDataDialogVisible=!1}}},[t._v("取 消")]),s("el-button",{attrs:{type:"primary"},on:{click:t.replyCurrentAnswer}},[t._v("确 定")])],1)],1)],1)],1)},n=[],i=(s("b64b"),s("e9c4"),s("d3b7"),s("159b"),s("d81d"),s("4de4"),s("a434"),s("a15b"),s("b0c0"),s("4e82"),s("c740"),s("7db0"),s("e350")),r=s("9109"),o=s("8039"),l=s("2790"),c={name:"SuggestDetail",data:function(){var t=this;return{accomplishDialog:{visible:!1,data:{completedResultStatus:null,id:null}},replayDataDialogVisible:!1,replayData:{code:"",type:null,progressType:null,reason:""},replayDataRule:{progressType:[{required:!0,message:"请选择办理过程满意度",trigger:"blur"}],type:[{required:!0,message:"请选择满意度",trigger:"blur"}]},id:"",suggestDetail:{id:"",status:-1,code:"",tag:"",metting:null,first:"",seconds:[],time:""},rules:{metting:[{required:!0,message:"请选择会议期间",trigger:"blur"}],category:[{required:!0,message:"请选择建议类型",trigger:"blur"}],title:[{required:!0,message:"请填写建议标题",trigger:"blur"}],first:[{required:!0,message:"请选择主提议人",trigger:"blur"}],seconds:[{required:!1,message:"请选择附议人择",trigger:"blur"}],time:[{required:!0,message:"请选择建议时间",trigger:"blur"}],content:[{required:!0,message:"请填写建议内容",trigger:"blur"}]},departEules:{subContent:[{required:!0,message:"概要答复内容为必填项！",trigger:"blur"}],content:[{required:!0,message:"答复内容为必填项！",trigger:"blur"}],form:[{required:!0,message:"办理形式为必填项！",trigger:"blur"}],completedType:[{required:!0,message:"办结类型为必填项！",trigger:"blur",validator:function(t,e,s){if(!(e>0&&e<=4))return s(new Error("办结类型为必填项！"));s()}}],attach:[{required:!0,message:"请上传PDF文档（红头答复文件）",trigger:"blur",validator:function(e,s,a){if(!(t.processData.attachments.length>0))return a(new Error("请上传PDF文档（红头答复文件）"));a()}}],time:[{required:!0,message:"办理时间为必填项！",trigger:"blur"}]},expireTimeOption:{disabledDate:function(t){return t.getTime()>Date.now()}},processData:{content:"",subContent:"",attachments:[],form:null,time:null,completedType:0},firstCascaderValue:[],firstCascaderValuePhone:"",cascaderStaffList:[],secondCascaderValue:[],locker:!1,committeeEditStatus:!1,auditData:{pass:!0,reason:""},auditSuggestDialogVisible:!1,department:{id:"",first:{name:"",userId:""},seconds:[]},units:[],unitParams:{pageIndex:-1,pageSize:-1,kw:"",isProcess:!0},lock:!0,currentUnit:null,process:[],checkList:[],banLiDanWeiAnswers:[],processData_Attachment:[],completeData:{pass:!0,reason:""},backData:{content:"",recordId:""},banLiDanWeiSecondAnswers:[],suggestDetailCopy:null}},computed:{isDangZhengBan:function(){return this.$parent.isDangZhengBan},isRenDaDaiBiao:function(){return this.$parent.isRenDaDaiBiao},isLianLuoYuan:function(){return this.$parent.isLianLuoYuan},isRenDaiLian:function(){return this.$parent.isRenDaiLian},isBanLiDanWei:function(){return this.$parent.isBanLiDanWei},isAdmin:function(){return this.$parent.isAdmin},showLianLuoYuanForm:function(){return 0===this.suggestDetail.status&&(this.isLianLuoYuan||this.isRenDaDaiBiao)},secondsCascader:function(){var t=this;if(0===this.firstCascaderValue.length)return this.cascaderStaffList;var e=JSON.parse(JSON.stringify(this.cascaderStaffList));return e.forEach((function(e){e.children.map((function(e){e.value===t.firstCascaderValue[1]&&(e.disabled=!0)}))})),e},canEditForm:function(){return 0===this.suggestDetail.status||!(!this.isRenDaiLian||1!==this.suggestDetail.status)&&this.committeeEditStatus},banLiDanWeiAnswersCanShowLength:function(){return 1},banLiDanWeiSecondAnswersCanShowLength:function(){return 1},canShowAllocatedUnit:function(){if(!this.suggestDetail)return!1;var t=this.isDangZhengBan&&(2===this.suggestDetail.status||3===this.suggestDetail.status);return!!t&&(this.suggestDetail.firstUnit&&this.suggestDetail.firstUnit.isSign?(console.info("1111111111111111111111111111111111"),!1):!(this.suggestDetail.secondUnit&&this.suggestDetail.secondUnit.filter((function(t){return t.isSign})).length>0)||(console.info("suggestDetailsuggestDetailsuggestDetailsuggestDetailsuggestDetail",this.suggestDetail.secondUnit),!1))}},watch:{firstCascaderValue:{handler:function(t,e){var s=this;t[1];this.suggestDetail.first=t[1],this.secondCascaderValue.forEach((function(e,a){var n=e.lastIndexOf(t[1]);n>=0&&s.secondCascaderValue.splice(a,1)}))}},secondCascaderValue:{handler:function(t,e){var s=[];t.forEach((function(t){s.push(t[1])})),this.suggestDetail.seconds=s}},checkList:function(t){this.processData.form=t.join(",")}},mounted:function(){var t=this;this.id=this.$route.query.id||"",this.suggestDetail.tag=sessionStorage.getItem("tag");var e=l["Promise"].resolve({});e=Object(o["i"])().then((function(e){e.success?t.cascaderStaffList=e.data:t.$message.error("获取人员列表失败！")})),this.id.length>0?(e.then((function(e){t.getSuggestDetail(t.id)})),this.accomplishDialog.data.id=this.id):this.suggestDetail.status=0,this.department.id=this.id,Object(r["e"])(this.unitParams).then((function(e){e.success?t.units=e.data.list:t.$message.error(e.msg)}))},methods:{backTo:function(){this.$router.push({name:"SuggestList"})},replyCurrentAnswer:function(){var t=this;this.$refs["replayDataForm"].validate().then((function(e){return t.replayData.code=t.id,t.$confirm("是否提交满意度？","提示")})).then((function(){return Object(o["C"])(t.replayData)})).then((function(e){console.info(e),t.replayDataDialogVisible=!1,t.$message.success("满意度回复成功"),t.getSuggestDetail(t.id)})).catch((function(t){!1!==t&&console.info(t)}))},getSuggestDetail:function(t){var e=this;this.backData.recordId=t,Object(o["c"])(t).then((function(t){var s=t.data.suggest;if(s.firstUnit&&(e.department.first={name:s.firstUnit.name,userId:s.firstUnit.userId},s.firstUnit.host=!0),s.secondUnit&&s.secondUnit.length>0){var a=[];for(var n in s.secondUnit)if(Object.hasOwnProperty.call(s.secondUnit,n)){var i=s.secondUnit[n];a.push({name:i.name,userId:i.userId})}e.department.seconds=a}e.suggestDetail=s;var r=[];return e.cascaderStaffList.forEach((function(t){t.children.forEach((function(s){s.value===e.suggestDetail.first&&(e.firstCascaderValue=[t.value,s.value],e.firstCascaderValuePhone=s.phone),e.suggestDetail.seconds.lastIndexOf(s.value)>=0&&r.push([t.value,s.value])}))})),e.secondCascaderValue=r,l["Promise"].resolve(t)})).then((function(t){var s=t.data.suggest,a=[];return t.data.suggest.status>2&&(Object(i["a"])(s.firstUnit.userId)?e.currentUnit=s.firstUnit:s.secondUnit.forEach((function(t){t.host=!1,a.push(t),Object(i["a"])(t.userId)&&(e.currentUnit=t)}))),l["Promise"].resolve(t)})).then((function(t){e.buildOnceReply(t),e.buildTwiceReply(t),3!==e.suggestDetail.status&&4!==e.suggestDetail.status||e.banLiDanWeiAnswers.forEach((function(t){e.isBanLiDanWei&&t.userId==e.currentUnit.userId&&(e.processData={content:t.content,subContent:t.subContent,form:t.form,time:t.time,attachments:t.attachments,completedType:e.suggestDetail.firstCompletedType},e.checkList=(t.form||"").split(","),e.processData_Attachment=t.displayAttachments)})),6===e.suggestDetail.status&&e.banLiDanWeiSecondAnswers.forEach((function(t){e.isBanLiDanWei&&t.userId==e.currentUnit.userId&&(e.processData={content:t.content,subContent:t.subContent,form:t.form,time:t.time,attachments:t.attachments,completedType:e.suggestDetail.secondCompletedType},e.checkList=(t.form||"").split(","),e.processData_Attachment=t.displayAttachments)}))}))},buildOnceReply:function(t){var e=this,s=(t.data.suggest,t.data.answers.filter((function(t){return 0===t.type}))),a=[];s.map((function(t){var s=[];t.attachments=JSON.parse(t.attachments),t.host=e.suggestDetail.firstUnit.userId==t.userId,t.canShow=e.isBanLiDanWei&&e.currentUnit.host||e.isRenDaiLian&&e.suggestDetail.status>=5||e.isAdmin,4===e.suggestDetail.status&&e.isBanLiDanWei&&e.currentUnit.userId===t.userId&&(t.canShow=!1),e.suggestDetail.status>=5&&e.isBanLiDanWei&&e.currentUnit.userId===t.userId&&(t.canShow=!0),t.host&&e.isBanLiDanWei&&(3===e.suggestDetail.status||4===e.suggestDetail.status)&&(t.canShow=!1),t.attachments.forEach((function(t){s.push({name:t.substring(t.lastIndexOf("/")+1),url:t})})),t.displayAttachments=s,t.checkList=(t.form||"").split(","),a.push(t)})),a.sort((function(t,e){return e.host-t.host})),this.banLiDanWeiAnswers=a},buildTwiceReply:function(t){var e=this,s=(t.data.suggest,t.data.answers.filter((function(t){return 1===t.type}))),a=[];s.map((function(t){var s=[];t.attachments=JSON.parse(t.attachments),t.host=e.suggestDetail.firstUnit.userId==t.userId,t.canShow=e.isBanLiDanWei&&e.currentUnit.host||e.isRenDaiLian&&e.suggestDetail.status>=7||e.isAdmin,6===e.suggestDetail.status&&e.isBanLiDanWei&&e.currentUnit.userId===t.userId&&(t.canShow=!1),e.suggestDetail.status>=7&&e.isBanLiDanWei&&e.currentUnit.userId===t.userId&&(t.canShow=!0),t.host&&e.isBanLiDanWei&&6===e.suggestDetail.status&&(t.canShow=!1),t.attachments.forEach((function(t){s.push({name:t.substring(t.lastIndexOf("/")+1),url:t})})),t.displayAttachments=s,t.checkList=(t.form||"").split(","),a.push(t)})),a.sort((function(t,e){return e.host-t.host})),this.banLiDanWeiSecondAnswers=a},onlySave:function(){var t=this,e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(!this.locker){this.locker=!0;var s=this.$refs["form"].validate().then((function(e){return Object(o["b"])(t.suggestDetail)})).then((function(s){t.id=s.msg,e&&(t.$message.success("增加建议成功"),t.backTo())})).catch((function(t){console.info(t)})).finally((function(){t.locker=!1,console.info("已执行完成")}));return s}},saveAndSubmit:function(){var t=this;this.onlySave(!1).then((function(e){return Object(o["g"])(t.id)})).then((function(e){e.success?(t.$message.success("提交成功"),t.backTo()):t.$message.error(e.msg)})).catch((function(t){console.info(t)}))},passSuggest:function(){var t=this,e="确定通过吗?";if(this.auditSuggestDialogVisible){if(0===(this.auditData.reason||"").length)return;e="确定不通过吗？"}else this.auditData.pass=!0;this.$confirm(e,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(o["h"])(t.suggestDetail.id,t.auditData).then((function(s){s.success?("确定通过吗?"===e?t.$message.success("审核已通过！"):"确定不通过吗？"===e&&t.$message.success("审核不通过！"),t.backTo()):t.$message.error(s.msg)}))}))},committeeUpdateSuggest:function(){var t=this;this.committeeEditStatus&&this.onlySave(!1).then((function(e){return t.passSuggest()})),this.suggestDetailCopy=JSON.parse(JSON.stringify(this.suggestDetail)),this.committeeEditStatus=!this.committeeEditStatus},saveUnit:function(){var t=this;if(this.lock)if(this.lock=!1,this.department.first.userId){var e=this.department.seconds.findIndex((function(t){return""===t.userId}));-1===e?Object(o["d"])(this.department).then((function(e){e.success?(t.$message.success("分配成功！"),t.backTo()):t.$message.error(e.msg),t.lock=!0})).catch((function(){t.lock=!0})):(this.$message.error("请选择会办部门"),this.lock=!0)}else this.$message.error("请选择主办部门"),this.lock=!0},checkProcess:function(t){var e=this.department.seconds.find((function(e){return e.userId===t}));return!!e},changeUnit:function(t){var e=this;if(t||0===t){var s=this.units.find((function(s){return s.id===e.department.seconds[t].userId}));s&&(this.department.seconds[t].name=s.name)}else{var a=this.units.find((function(t){return t.id===e.department.first.userId}));a&&(this.department.first.name=a.name)}},addUnit:function(){var t={name:"",userId:""};this.department.seconds.push(t)},handleSign:function(){var t=this;this.$confirm("确定签收吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.lock&&(t.lock=!1,t.currentUnit&&t.currentUnit.isSign?(t.$message.info("已签收，等待其他办理部门签收"),t.lock=!0):Object(o["D"])(t.id).then((function(e){t.lock=!0,e.success?(t.$message.success("已签收"),t.getSuggestDetail(t.id)):t.$message.error(e.msg)})).catch((function(e){t.lock=!0})))}))},uploadFile:function(t){var e=this,s=new FormData;s.append("file",t.file),Object(o["G"])(s).then((function(t){if(t.success){e.$message.success("上传成功"),e.processData.attachments.push(t.msg);var s={name:t.msg.split("Attachments/")[t.msg.split("Attachments/").length-1],url:t.msg,status:"success"};e.processData_Attachment.push(s)}else e.$message.error(t.msg);e.$refs["process"].validateField("attach")})).catch((function(t){console.log(t)}))},handlePreview:function(t){var e=document.createElement("a");e.style.display="none",e.target="_blank",e.href="/api".split("api")[0]+t.url,document.body.appendChild(e),e.click(),document.body.removeChild(e)},handleRemove:function(t,e){for(var s=0;s<this.processData.attachments.length;s++)t.url===this.processData.attachments[s]&&(this.processData.attachments.splice(s,1),this.processData_Attachment.splice(s,1));this.$refs["process"].validateField("attach")},beforeRemove:function(t,e){if("success"===t.status)return this.$confirm("确认删除".concat(t.name,"吗"),"确认删除")},handleSave:function(){var t=this;this.$refs.process.validate().then((function(){return t.$confirm("确定".concat(t.currentUnit.host?"保存但不提交最终答复":"提交","吗?"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"})})).then((function(e){return Object(o["e"])(t.id,t.processData)})).then((function(e){e.success?(t.$message.success("提交回复成功！"),t.backTo()):t.$message.error(e.msg)})).catch((function(t){console.info("办理单位提交答复失败！",t)}))},handleSubmit:function(){var t=this;this.$refs.process.validate().then((function(e){return t.$confirm("确定保存并提交最终答复吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"})})).then((function(){return t.lock?(t.lock=!1,Object(o["e"])(t.suggestDetail.id,t.processData)):l["Promise"].reject("")})).then((function(e){if(e.success)return Object(o["j"])(t.suggestDetail.id,t.completeData);t.$message.error(e.msg)})).then((function(e){e.success?e.data?(t.$message.success("提交成功！"),t.backTo()):t.$message.error("仍有会办部门未提交！"):t.$message.error(e.msg)})).catch((function(t){console.err("保存并提交最终答复发生错误",t)})).finally((function(){t.lock=!0}))},backReAlloc:function(){var t=this;this.$confirm("是否退回重新分配","提示").then((function(e){return Object(o["z"])(t.backData.recordId)})).then((function(e){t.$message("操作成功！"),t.backTo()})).catch((function(t){"cancel"===t&&console.info("被取消")}))},accomplish:function(){var t=this;this.$refs["accomplishDialogForm"].validate().then((function(e){return t.$confirm("您确定办结吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"})})).then((function(){Object(o["a"])(t.suggestDetail.id,t.accomplishDialog.data.completedResultStatus).then((function(e){e.success?(t.$message.success("已办结！"),t.backTo()):t.$message.error(e.msg)}))})).catch((function(t){console.error("办结",t)}))},delUnit:function(t){this.department.seconds.splice(t,1)}}},u=c,d=(s("8899"),s("2877")),g=Object(d["a"])(u,a,n,!1,null,"facb0528",null);e["default"]=g.exports},de3d:function(t,e,s){"use strict";(function(e){var s,a,n=e.MutationObserver||e.WebKitMutationObserver;if(n){var i=0,r=new n(u),o=e.document.createTextNode("");r.observe(o,{characterData:!0}),s=function(){o.data=i=++i%2}}else if(e.setImmediate||"undefined"===typeof e.MessageChannel)s="document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var t=e.document.createElement("script");t.onreadystatechange=function(){u(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},e.document.documentElement.appendChild(t)}:function(){setTimeout(u,0)};else{var l=new e.MessageChannel;l.port1.onmessage=u,s=function(){l.port2.postMessage(0)}}var c=[];function u(){var t,e;a=!0;var s=c.length;while(s){e=c,c=[],t=-1;while(++t<s)e[t]();s=c.length}a=!1}function d(t){1!==c.push(t)||a||s()}t.exports=d}).call(this,s("c8ba"))},e350:function(t,e,s){"use strict";s.d(e,"b",(function(){return n})),s.d(e,"a",(function(){return i}));s("d3b7"),s("caad"),s("2532");var a=s("4360");function n(t){if(t&&t instanceof Array&&t.length>0){var e=a["a"].getters&&a["a"].getters.roles,s=t,n=e.some((function(t){return s.includes(t)}));return n}return console.error("need roles! Like v-permission=\"['admin','editor']\""),!1}function i(t){if(t){var e=a["a"].getters&&a["a"].getters.code;return t===e}return console.error("部门编号为空"),!1}}}]);