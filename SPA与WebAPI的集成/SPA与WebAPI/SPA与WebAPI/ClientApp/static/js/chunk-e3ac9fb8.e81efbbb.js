(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e3ac9fb8"],{"465f":function(t,e,n){"use strict";n("9a53")},"9a53":function(t,e,n){},cf89:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-container advice-container"},[n("div",{staticClass:"main"},[n("div",{staticClass:"filterbar"},[n("div",{staticClass:"search"},[n("el-input",{staticClass:"searchInput",staticStyle:{width:"200px","border-radius":"50px"},attrs:{placeholder:"请输入关键词搜索"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleFilter(e)}},model:{value:t.queryList.kw,callback:function(e){t.$set(t.queryList,"kw",e)},expression:"queryList.kw"}}),n("i",{staticClass:"el-icon-search",on:{click:t.handleFilter}})],1),t.hasDeleteAllAndImportRight?n("el-button",{staticClass:"addBtn",on:{click:t.viewAll}},[t._v("查看所有 ")]):t._e(),t.hasDeleteAllAndImportRight?n("el-button",{staticClass:"addBtn",attrs:{type:"danger"},on:{click:t.emptyAllUser}},[t._v("清空所有")]):t._e(),t.hasDeleteAllAndImportRight?n("el-upload",{attrs:{action:"api/suggestManagement/Import",multiple:!1,"show-file-list":!1,"with-credentials":!0,"on-success":t.handleLiveJobImportSuccess,"on-error":t.handleLiveJobImportError,"before-upload":t.handleLiveJobImportBeforeUpload,accept:"application/vnd.ms-excel, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}},[n("el-button",{staticClass:"addBtn",attrs:{icon:"el-icon-upload2",type:"primary"}},[t._v("批量导入 ")])],1):t._e()],1),n("div",{staticClass:"table"},[n("el-table",{attrs:{data:t.suggestList.list,stripe:"",border:""}},[n("el-table-column",{attrs:{width:"80",type:"index",label:"编号",align:"center",index:t.indexMethod}}),n("el-table-column",{attrs:{width:"100",prop:"proponent",label:"姓名",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[t._v(" "+t._s(n.name)+" ")]}}])}),n("el-table-column",{attrs:{prop:"proponent",label:"街道",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[t._v(" "+t._s(n.street)+" ")]}}])}),n("el-table-column",{attrs:{width:"130",prop:"proponent",label:"电话",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[t._v(" "+t._s(n.phone)+" ")]}}])}),n("el-table-column",{attrs:{prop:"proponent",label:"地址",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[t._v(" "+t._s(n.address)+" ")]}}])})],1),n("el-pagination",{staticStyle:{"margin-top":"2vh","margin-bottom":"1vh","text-align":"center"},attrs:{layout:"total, sizes, prev, pager, next, jumper","current-page":t.queryList.pageIndex,"page-sizes":[10,20,30,50,100],"page-size":t.queryList.pageSize,total:t.suggestList.totalCount},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)])])},a=[],s=n("e350"),r=n("b775");function o(t){return Object(r["a"])({url:"/suggestManagement",method:"get",params:t})}function l(){return Object(r["a"])({url:"/suggestManagement/DeleteAll",method:"post"})}var c,u=n("2b0e"),d=0;function p(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"努力加载中...";c=u["default"].prototype.$loading({lock:!0,text:t,background:"rgba(255,255,255,.4)",target:document.querySelector(".app-main")})}function h(){c.close()}function g(t){0===d&&p(t),d++}function f(){d<=0||(d--,0===d&&h())}var m={name:"SuggestList",data:function(){return{queryList:{pageIndex:1,pageSize:20,kw:""},suggestList:{list:[],totalCount:0}}},mounted:function(){this.hasDeleteAllAndImportRight&&this.viewAll(),this.$nextTick((function(){var t=document.getElementsByClassName("el-pagination");t&&(document.getElementsByClassName("btn-prev")[0].innerHTML="上一页",document.getElementsByClassName("btn-next")[0].innerHTML="下一页")}))},methods:{viewAll:function(){this.queryList={pageIndex:1,pageSize:20,kw:""},this.getList()},handleLiveJobImportSuccess:function(t,e){f(),t&&(this.$message.success("导入成功"),this.getList())},handleLiveJobImportError:function(t,e,n){f(),this.$message.error("导入失败")},handleLiveJobImportBeforeUpload:function(t){g("正在导入代表")},handleFilter:function(){this.queryList.pageIndex=1,this.getList()},emptyAllUser:function(){var t=this;this.$confirm("此操作将清空所有人大代表, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){g("正在清空数据"),l().then((function(e){f(),t.$message.success("清空成功"),t.queryList.pageIndex=1,t.getList()})).catch((function(t){f()}))})).catch((function(){}))},getList:function(){var t=this;if(g(),!this.hasDeleteAllAndImportRight&&""==this.queryList.kw)return this.suggestList={list:[],totalCount:0},void f();o(this.queryList).then((function(e){f(),e&&(t.suggestList=e)})).catch((function(t){f()}))},handleSizeChange:function(t){this.queryList.pageSize=t,this.getList()},handleCurrentChange:function(t){this.queryList.pageIndex=t,this.getList()},indexMethod:function(t){return t+(this.queryList.pageIndex-1)*this.queryList.pageSize+1}},computed:{isDangZhengBan:function(){return Object(s["b"])(["dzb"])},isRenDaDaiBiao:function(){return Object(s["b"])(["rd"])},isLianLuoYuan:function(){return Object(s["b"])(["Liaison"])},isRenDaiLian:function(){return Object(s["b"])(["Committee","Allocation"])},isBanLiDanWei:function(){return Object(s["b"])(["Process"])},isAdmin:function(){return Object(s["b"])(["admin"])},hasDeleteAllAndImportRight:function(){return this.isAdmin||this.isRenDaiLian}}},b=m,v=(n("465f"),n("2877")),L=Object(v["a"])(b,i,a,!1,null,"f199a0f2",null);e["default"]=L.exports},e350:function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"a",(function(){return s}));n("d3b7"),n("caad"),n("2532");var i=n("4360");function a(t){if(t&&t instanceof Array&&t.length>0){var e=i["a"].getters&&i["a"].getters.roles,n=t,a=e.some((function(t){return n.includes(t)}));return a}return console.error("need roles! Like v-permission=\"['admin','editor']\""),!1}function s(t){if(t){var e=i["a"].getters&&i["a"].getters.code;return t===e}return console.error("部门编号为空"),!1}}}]);