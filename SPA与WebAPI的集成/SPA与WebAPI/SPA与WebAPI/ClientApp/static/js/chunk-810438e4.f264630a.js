(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-810438e4"],{"149d":function(e,t,n){"use strict";n("217c9")},"217c9":function(e,t,n){},"6edd":function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-container advice-container"},[n("div",{directives:[{name:"show",rawName:"v-show",value:!e.show,expression:"!show"}],staticClass:"main"},[n("div",{staticClass:"headLand"},[n("el-button",{staticClass:"addBtn",attrs:{type:"primary"},on:{click:e.addDepartment}},[e._v("新增部门")]),n("div",{staticClass:"search"},[n("el-input",{staticClass:"searchInput",staticStyle:{width:"200px"},attrs:{placeholder:"请输入关键词搜索"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getList(t)}},model:{value:e.params.kw,callback:function(t){e.$set(e.params,"kw",t)},expression:"params.kw"}}),n("i",{staticClass:"el-icon-search",on:{click:e.getList}})],1)],1),n("div",{staticClass:"table"},[n("el-table",{attrs:{data:e.departmenList,stripe:"",border:"",height:"70vh"}},[n("el-table-column",{attrs:{width:"400",prop:"name",label:"部门名称",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[e._v(" "+e._s(n.name)+" ")]}}])}),n("el-table-column",{attrs:{prop:"adminUserInfoId",label:"账号",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[e._v(" "+e._s(n.adminName)+" ")]}}])}),n("el-table-column",{attrs:{width:"300",prop:"addTime",label:"添加时间",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[e._v(" "+e._s(n.addTime)+" ")]}}])}),n("el-table-column",{attrs:{width:"200",label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[n("div",{staticClass:"btns"},[n("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.edit(i)}}},[e._v("编辑")]),n("el-button",{attrs:{type:"danger"},on:{click:function(t){return e.delUnit(i)}}},[e._v("删除")])],1)]}}])})],1),n("el-pagination",{staticStyle:{"margin-top":"2vh","text-align":"center"},attrs:{layout:"total, sizes, prev, pager, next, jumper","current-page":e.params.pageIndex,"page-sizes":[10,20,30,50,100],"page-size":e.params.pageSize,total:e.departmenList.totalCount},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)]),n("div",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"show"}],staticClass:"edit"},[n("div",{staticClass:"executive"},[n("div",{staticClass:"unit"},[n("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[n("div",{staticClass:"form"},[n("div",{staticClass:"formLeft"},[n("el-form-item",{attrs:{label:"关联账号",prop:"adminUserInfoId"}},[n("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"请选择关联账号"},model:{value:e.ruleForm.adminUserInfoId,callback:function(t){e.$set(e.ruleForm,"adminUserInfoId",t)},expression:"ruleForm.adminUserInfoId"}},e._l(e.admin,(function(e){return n("el-option",{key:e.id,attrs:{label:e.userName,value:e.id}})})),1)],1),n("el-form-item",{attrs:{label:"部门",prop:"name"}},[n("el-input",{model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),n("el-form-item",{attrs:{label:"办理单位",prop:"isProcess"}},[n("el-checkbox",{model:{value:e.ruleForm.isProcess,callback:function(t){e.$set(e.ruleForm,"isProcess",t)},expression:"ruleForm.isProcess"}},[e._v(e._s(e.ruleForm.isProcess?"是":"否"))])],1),n("el-form-item",{attrs:{label:"备注",prop:"remark"}},[n("el-input",{attrs:{type:"textarea",resize:"none"},model:{value:e.ruleForm.remark,callback:function(t){e.$set(e.ruleForm,"remark",t)},expression:"ruleForm.remark"}})],1)],1)]),n("el-form-item",[n("div",{staticStyle:{"text-align":"right"}},[n("el-button",{on:{click:function(t){return e.resetForm("ruleForm")}}},[e._v("取消")]),n("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("提交")])],1)])],1)],1),n("el-dialog",{attrs:{visible:e.dialogVisible,width:"30%","before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisible=t}}},[n("el-select",{attrs:{placeholder:"请选择"},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},e._l(e.options,(function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.label}})})),1),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.confirm()}}},[e._v("确 定")])],1)],1),n("el-dialog",{attrs:{visible:e.failVisible,width:"40%","before-close":e.handleClose},on:{"update:visible":function(t){e.failVisible=t}}},[n("div",{staticClass:"dialog"},[n("div",{staticClass:"title"},[e._v("请填写您的不通过原因")]),n("el-input",{attrs:{type:"textarea",rows:"13",resize:"none"}}),n("div",{staticClass:"btn"},[n("el-button",{on:{click:function(t){e.failVisible=!1}}},[e._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:e.failConfirm}},[e._v("确 定")])],1)],1)])],1)])])},s=[],a=(n("a434"),n("e350")),r=n("9109"),l={name:"Advice",data:function(){return{admin:[],params:{pageIndex:1,pageSize:20,kw:""},ruleForm:{adminUserInfoId:"",name:"",id:"",remark:"",units:[],isProcess:!1},rules:{adminUserInfoId:[{required:!0,message:"请选择关联账号",trigger:"blur"}],name:[{required:!0,message:"请填写部门",trigger:"blur"}],remark:[{required:!1,message:"请填写备注",trigger:"blur"}]},departmenList:[],total:0,show:!1,form:{code:"",title:"",person:"",date:"",content:""},isLiaison:!1,dialogVisible:!1,failVisible:!1,options:[{value:1,label:"宣传部"},{value:2,label:"教育部"},{value:3,label:"/教育体育和科技局"}],value:"",index:null,organizer:"",units:[{value:""}],detail:{id:1,name:"张三",date:"2021年5月17日 13:08:09",title:"关于打造红色文化的建议",content:"红色文化是广大人民群众在中国共产党领导下，在实现中华民族的解放与自由的历史进程中和新中国社会主义三大改造时期，整合、重组、吸收、优化古今中外的先进文化成果基础上，以马克思列宁主义的科学理论为指导而生成的革命文化。将“红色文化”概括为革命年代中的“人、物、事、魂”。其中的“人”是在革命时期对革命有着一定影响的革命志士和为革命事业而牺牲的革命烈士；“物”是 革命志士或烈士所用之物，也包括他们生活或战斗过的革命旧址和遗址；“事”是有着重大影响的革命活动或历史事件；“魂”则体现为革命精神即红色精神。将“红色文化”概括为革命年代中的“人、物、事、魂”。其中的“人”是在革命时期对革命有着一定影响的革命志士和为革命事业而牺牲的革命烈士；“物”是 革命志士或烈士所用之物，也包括他们生活或战斗过的革命旧址和遗址；“事”是有着重大影响的革命活动或历史事件；“魂”则体现为革命精神即红色精神。将“红色文化”概括为革命年代中的“人、物、事、魂”。其中的“人”是在革命时期对革命有着一定影响的革命志士和为革命事业而牺牲的革命烈士；“物”是 革命志士或烈士所用之物，也包括他们生活或战斗过的革命旧址和遗址；“事”是有着重大影响的革命活动或历史事件；“魂”则体现为革命精神即红色精神。将“红色文化”概括为革命年代中的“人、物、事、魂”。其中的“人”是在革命时期对革命有着一定影响的革命志士和为革命事业而牺牲的革命烈士；“物”是 革命志士或烈士所用之物，也包括他们生活或战斗过的革命旧址和遗址；“事”是有着重大影响的革命活动或历史事件；“魂”则体现为革命精神即红色精神。"}}},mounted:function(){console.log(Object(a["b"])(["admin"])),this.getList(),this.getAdmin(),this.$nextTick((function(){var e=document.getElementsByClassName("el-pagination");e&&(document.getElementsByClassName("btn-prev")[0].innerHTML="上一页",document.getElementsByClassName("btn-next")[0].innerHTML="下一页")}))},methods:{getAdmin:function(){var e=this;Object(r["b"])({pageIndex:0,pageSize:0}).then((function(t){t.success?e.admin=t.data.list:e.$message.error("获取管理员失败")}))},indexMethod:function(e){return e+(this.params.pageIndex-1)*this.params.pageSize+1},handleSizeChange:function(e){this.params.pageSize=e,this.getList()},handleCurrentChange:function(e){this.params.pageIndex=e,this.getList()},getList:function(){var e=this;Object(r["e"])(this.params).then((function(t){t.success?(e.departmenList=t.data.list,e.departmenList.totalCount=t.data.totalCount):e.$message.error("获取列表失败")}))},edit:function(e){var t=this;Object(r["d"])(e.id).then((function(e){e.success?(t.ruleForm=e.data,t.show=!0):t.$message.error("操作失败")}))},addPlace:function(){this.ruleForm.units.push("")},delPlace:function(e){this.ruleForm.units.length>1&&this.ruleForm.units.splice(e,1)},addDepartment:function(){this.ruleForm.id="",this.show=!0},submitForm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return console.log("error submit!!"),!1;Object(r["a"])(t.ruleForm).then((function(e){e.success?(t.$message.success("提交成功！"),t.resetForm()):t.$message.error(e.msg)}))}))},resetForm:function(e){this.$refs.ruleForm.resetFields(),this.show=!1,this.getList()},checkUnit:function(e){console.log(e),this.dialogVisible=!0,this.index=e||0===e?e:null},delUnit:function(e){var t=this;this.$confirm("是否删除当前部门","删除").then((function(t){return Object(r["c"])(e.id)})).then((function(e){t.$message.success("删除成功"),t.getList()})).catch((function(e){}))},handleClose:function(){this.dialogVisible=!1},confirm:function(){console.log(this.units,this.index,this.units[this.index],this.value),this.index||0===this.index?this.units[this.index].value=this.value:this.organizer=this.value,this.dialogVisible=!1},handleFail:function(){this.failVisible=!0},save:function(){},handleSave:function(){this.show=!1},failConfirm:function(){this.failVisible=!1,this.show=!1},submit:function(){}}},o=l,u=(n("149d"),n("2877")),c=Object(u["a"])(o,i,s,!1,null,"563ecb53",null);t["default"]=c.exports},9109:function(e,t,n){"use strict";n.d(t,"e",(function(){return s})),n.d(t,"a",(function(){return a})),n.d(t,"d",(function(){return r})),n.d(t,"b",(function(){return l})),n.d(t,"c",(function(){return o}));var i=n("b775");function s(e){return Object(i["a"])({url:"/user",method:"get",params:e})}function a(e){return Object(i["a"])({url:"user",method:"post",data:e})}function r(e){return Object(i["a"])({url:"/user/".concat(e),method:"get"})}function l(e){return Object(i["a"])({url:"admin",method:"get",params:e})}function o(e){return Object(i["a"])({url:"/user/".concat(e),method:"delete"})}},e350:function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return a}));n("d3b7"),n("caad"),n("2532");var i=n("4360");function s(e){if(e&&e instanceof Array&&e.length>0){var t=i["a"].getters&&i["a"].getters.roles,n=e,s=t.some((function(e){return n.includes(e)}));return s}return console.error("need roles! Like v-permission=\"['admin','editor']\""),!1}function a(e){if(e){var t=i["a"].getters&&i["a"].getters.code;return e===t}return console.error("部门编号为空"),!1}}}]);